(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[133],{1543:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(11),l=a(0),c=a.n(l),r=(a(4),a(1218)),o=(a(2),a(1),a(5),a(1243)),i=a(41),s=a(1373),m=(a(1372),a(637)),u=(a(64),a(1374)),d=(a(44),a(17),a(61),a(43),a(62),a(1418)),p=a(1312),f=a(1271),b=a(1272),h=a(200),E=function(e){return"date"===e||"year"===e?"date":"time"},v=Object(o.a)((function(e){var t="light"===e.palette.type?e.palette.primary.main:e.palette.background.default;return{tabs:{color:e.palette.getContrastText(t),backgroundColor:t}}}),{name:"MuiPickerDTTabs"}),g=function(e){var t=e.view,a=e.onChange,n=e.dateRangeIcon,c=e.timeIcon,r=v(),o="light"===Object(i.a)().palette.type?"secondary":"primary";return Object(l.createElement)(h.a,null,Object(l.createElement)(b.a,{variant:"fullWidth",value:E(t),onChange:function(e,n){n!==E(t)&&a("date"===n?"date":"hours")},className:r.tabs,indicatorColor:o},Object(l.createElement)(f.a,{value:"date",icon:Object(l.createElement)(l.Fragment,null,n)}),Object(l.createElement)(f.a,{value:"time",icon:Object(l.createElement)(l.Fragment,null,c)})))};g.defaultProps={dateRangeIcon:Object(l.createElement)((function(e){return c.a.createElement(m.a,e,c.a.createElement("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),c.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}))}),null),timeIcon:Object(l.createElement)((function(e){return c.a.createElement(m.a,e,c.a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),c.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),c.a.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"}))}),null)};var y=Object(o.a)((function(e){return{toolbar:{paddingLeft:16,paddingRight:16,justifyContent:"space-around"},separator:{margin:"0 4px 0 2px",cursor:"default"}}}),{name:"MuiPickerDTToolbar"}),x=function(e){var t=e.date,a=e.openView,n=e.setOpenView,c=e.ampm,o=e.hideTabs,m=e.dateRangeIcon,u=e.timeIcon,f=e.onChange,b=Object(r.b)(),h=y(),E=!o&&"undefined"!==typeof window&&window.innerHeight>667,v=Object(d.b)(t,c,f),x=v.meridiemMode,C=v.handleMeridiemChange,O="rtl"===Object(i.a)().direction;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(s.b,{isLandscape:!1,className:h.toolbar},Object(l.createElement)(p.a,{container:!0,justify:"center",wrap:"nowrap"},Object(l.createElement)(p.a,{item:!0,container:!0,xs:5,justify:"flex-start",direction:"column"},Object(l.createElement)("div",null,Object(l.createElement)(s.c,{variant:"subtitle1",onClick:function(){return n("year")},selected:"year"===a,label:b.getYearText(t)})),Object(l.createElement)("div",null,Object(l.createElement)(s.c,{variant:"h4",onClick:function(){return n("date")},selected:"date"===a,label:b.getDateTimePickerHeaderText(t)}))),Object(l.createElement)(p.a,{item:!0,container:!0,xs:6,justify:"center",alignItems:"flex-end",direction:O?"row-reverse":"row"},Object(l.createElement)(s.c,{variant:"h3",onClick:function(){return n("hours")},selected:"hours"===a,label:b.getHourText(t,c)}),Object(l.createElement)(s.f,{variant:"h3",label:":",className:h.separator}),Object(l.createElement)(s.c,{variant:"h3",onClick:function(){return n("minutes")},selected:"minutes"===a,label:b.getMinuteText(t)})),c&&Object(l.createElement)(p.a,{item:!0,container:!0,xs:1,direction:"column",justify:"flex-end"},Object(l.createElement)(s.c,{variant:"subtitle1",selected:"am"===x,label:b.getMeridiemText("am"),onClick:function(){return C("am")}}),Object(l.createElement)(s.c,{variant:"subtitle1",selected:"pm"===x,label:b.getMeridiemText("pm"),onClick:function(){return C("pm")}})))),E&&Object(l.createElement)(g,{dateRangeIcon:m,timeIcon:u,view:a,onChange:n}))};function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var O=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},u.b,{wider:!0,orientation:"portrait",openTo:"date",views:["year","date","hours","minutes"]});function w(e){var t=Object(r.b)();if("portrait"!==e.orientation)throw new Error("We are not supporting custom orientation for DateTimePicker yet :(");return{getDefaultFormat:function(){return Object(s.h)(e.format,e.ampm,{"12h":t.dateTime12hFormat,"24h":t.dateTime24hFormat})}}}var j=Object(s.g)({useOptions:w,Input:s.d,useState:s.i,DefaultToolbarComponent:x}),N=Object(s.g)({useOptions:w,Input:s.a,useState:s.e,DefaultToolbarComponent:x,getCustomProps:function(e){return{refuse:e.ampm?/[^\dap]+/gi:/[^\d]+/gi}}});j.defaultProps=O,N.defaultProps=O},1550:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=(n=o)&&n.__esModule?n:{default:n};var s={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.reCalculateColumnCount=a.reCalculateColumnCount.bind(a),a.reCalculateColumnCountDebounce=a.reCalculateColumnCountDebounce.bind(a);var n=void 0;return n=a.props.breakpointCols&&a.props.breakpointCols.default?a.props.breakpointCols.default:parseInt(a.props.breakpointCols)||2,a.state={columnCount:n},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"componentDidUpdate",value:function(){this.reCalculateColumnCount()}},{key:"componentWillUnmount",value:function(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"reCalculateColumnCountDebounce",value:function(){var e=this;window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame((function(){e.reCalculateColumnCount()}))):this.reCalculateColumnCount()}},{key:"reCalculateColumnCount",value:function(){var e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!==("undefined"===typeof t?"undefined":c(t))&&(t={default:parseInt(t)||2});var a=1/0,n=t.default||2;for(var l in t){var r=parseInt(l);r>0&&e<=r&&r<a&&(a=r,n=t[l])}n=Math.max(1,parseInt(n)||1),this.state.columnCount!==n&&this.setState({columnCount:n})}},{key:"itemsInColumns",value:function(){for(var e=this.state.columnCount,t=new Array(e),a=[].concat(this.props.children||[]),n=0;n<a.length;n++){var l=n%e;t[l]||(t[l]=[]),t[l].push(a[n])}return t}},{key:"renderColumns",value:function(){var e=this.props,t=e.column,a=e.columnAttrs,n=void 0===a?{}:a,c=e.columnClassName,r=this.itemsInColumns(),o=100/r.length+"%",s=c;"string"!==typeof s&&(this.logDeprecated('The property "columnClassName" requires a string'),"undefined"===typeof s&&(s="my-masonry-grid_column"));var m=l({},t,n,{style:l({},n.style,{width:o}),className:s});return r.map((function(e,t){return i.default.createElement("div",l({},m,{key:t}),e)}))}},{key:"logDeprecated",value:function(e){console.error("[Masonry]",e)}},{key:"render",value:function(){var e=this.props,t=(e.children,e.breakpointCols,e.columnClassName,e.columnAttrs,e.column,e.className),a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),n=t;return"string"!==typeof t&&(this.logDeprecated('The property "className" requires a string'),"undefined"===typeof t&&(n="my-masonry-grid")),i.default.createElement("div",l({},a,{className:n}),this.renderColumns())}}]),t}(i.default.Component);m.defaultProps=s,t.default=m},2549:function(e,t,a){"use strict";a.r(t);var n=a(165),l=a(240),c=a(0),r=a.n(c),o=a(6),i=a(1240),s=a(20),m=a(52),u=a.n(m);const d=Object(s.b)("notesApp/labels/getLabels",async()=>{const e=await u.a.get("/api/notes-app/labels");return await e.data}),p=Object(s.b)("notesApp/labels/updateLabels",async e=>{const t=await u.a.post("/api/notes-app/update-labels",{labels:Object.values(e)});return await t.data}),f=Object(s.c)({}),{selectAll:b,selectEntities:h,selectById:E}=f.getSelectors(e=>e.notesApp.labels),v=Object(s.d)({name:"notesApp/labels",initialState:f.getInitialState({labelsDialogOpen:!1}),reducers:{openLabelsDialog:(e,t)=>{e.labelsDialogOpen=!0},closeLabelsDialog:(e,t)=>{e.labelsDialogOpen=!1}},extraReducers:{[d.fulfilled]:f.setAll,[p.fulfilled]:f.setAll}}),{openLabelsDialog:g,closeLabelsDialog:y}=v.actions;var x=v.reducer,C=a(132),O=a(7),w=a(1245),j=a(1191),N=a(635),k=a(1196),S=a(1197),D=a(201),I=a(27);var z=function(e){return e=e||{},O.a.defaults(e,{id:I.a.generateGUID(),name:"",handle:I.a.handleize(e.name||"")})},A=a(2);var T=function(e){const t=Object(o.c)(),a=Object(o.d)(e=>{let{notesApp:t}=e;return t.labels.entities}),[n,l]=Object(c.useState)(a),{form:i,handleChange:s,resetForm:m}=Object(C.c)({name:""});Object(c.useEffect)(()=>{l(a)},[a]);const u=Object(C.a)(e=>{t(p(e))},600);function d(){return""===i.name}return Object(c.useEffect)(()=>{n&&!O.a.isEqual(n,a)&&u(n)},[u,a,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{className:"text-16 mb-8 font-600"},"Edit Labels"),r.a.createElement(k.a,{dense:!0},r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),d())return;const t=z(i);l(O.a.setIn(n,t.id,t)),m()}},r.a.createElement(S.a,{className:"p-0 mb-16",dense:!0},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"add"),r.a.createElement(N.a,{className:Object(A.default)("flex flex-1 mx-8"),name:"name",value:i.name,onChange:s,placeholder:"Create new label"}),r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0","aria-label":"Delete",disabled:d(),type:"submit"},r.a.createElement(w.a,{fontSize:"small"},"check")))),Object(c.useMemo)(()=>Object.entries(n).map(e=>{let[t,a]=e;return r.a.createElement(S.a,{className:"p-0",key:a.id,dense:!0},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"label"),r.a.createElement(N.a,{className:Object(A.default)("flex flex-1 mx-8"),name:"name",value:a.name,onChange:e=>function(e,t){const a=z(O.a.setIn(t,e.target.name,e.target.value));l(O.a.setIn(n,a.id,a))}(e,a),disableUnderline:!0}),r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0","aria-label":"Delete",onClick:e=>function(e){l(O.a.omit(n,[e.id]))}(a)},r.a.createElement(w.a,{fontSize:"small"},"delete")))}),[n])))};var L=function(e){const t=Object(o.c)(),a=Object(o.d)(e=>{let{notesApp:t}=e;return t.labels.labelsDialogOpen});return r.a.createElement(i.a,{classes:{paper:"w-full max-w-320 p-16 m-24 rounded-8"},onClose:e=>t(y()),open:a},r.a.createElement(T,null))},P=a(1201),_=a(33),M=a(1251),F=a(1256),H=a(1252);var R=function(e){return e=e||{},O.a.defaults(e,{id:I.a.generateGUID(),title:"",description:"",archive:!1,image:"",time:null,reminder:null,checklist:[],labels:[]})},W=a(9),U=a(1280),B=a(26);var V=function(e){const t=Object(o.d)(h);if(!t)return null;const a=t[e.id];if(!a)return null;const n=e.linkable?{component:B.a,onClick:e=>{e.stopPropagation()},to:"/apps/notes/labels/".concat(a.handle,"/").concat(a.id)}:{};return r.a.createElement(U.a,Object.assign({},n,{label:a.name,classes:Object(W.a)({root:Object(A.default)("h-24",e.className),label:"px-12 py-4 text-11",deleteIcon:"w-16"},e.classes),variant:"outlined",onDelete:e.onDelete}))},q=a(101),Y=a.n(q);var G=function(e){return e.date?r.a.createElement(U.a,{icon:r.a.createElement(w.a,{className:"text-16"},"access_time"),label:Y()(e.date).format("MMM DD YY, h:mm A"),classes:Object(W.a)({root:Object(A.default)("h-24",e.className),label:"px-12 py-4 text-11",deleteIcon:"w-16"},e.classes),variant:"outlined",onDelete:e.onDelete}):null},J=a(45);var K=function(e){return e=e||{},O.a.defaults(e,{id:I.a.generateGUID(),text:"",checked:!1})};var Q=function(e){const{form:t,handleChange:a,resetForm:n}=Object(C.c)({text:""});function l(){return""===t.text}return r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),l()||(e.onListItemAdd(K(t)),n())}},r.a.createElement(S.a,{className:"p-0",dense:!0},r.a.createElement(j.a,{className:"w-32 h-32 p-0 -mx-4","aria-label":"Add",type:"submit",disabled:l()},r.a.createElement(w.a,{fontSize:"small"},"add")),r.a.createElement(N.a,{className:"flex flex-1 px-8",name:"text",value:t.text,onChange:a,placeholder:"Add an item",disableUnderline:!0,autoFocus:!0})))},X=a(1274);var Z=function(e){function t(t){e.onListItemChange(O.a.setIn(e.item,t.target.name,"checkbox"===t.target.type?t.target.checked:t.target.value))}return e.item?r.a.createElement(S.a,{className:"p-0",key:e.item.id,dense:!0},r.a.createElement(X.a,{className:"p-0",checked:e.item.checked,tabIndex:-1,disableRipple:!0,name:"checked",onChange:t,color:"default"}),r.a.createElement(N.a,{className:Object(A.default)("flex flex-1 mx-8",e.item.checked&&"line-through opacity-50"),name:"text",value:e.item.text,onChange:t,disableUnderline:!0}),r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0","aria-label":"Delete",onClick:()=>e.onListItemRemove(e.item.id)},r.a.createElement(w.a,{fontSize:"small"},"delete"))):null};var $=function(e){function t(t){e.onCheckListChange(e.checklist.map(e=>e.id===t.id?t:e))}function a(t){e.onCheckListChange(e.checklist.filter(e=>e.id!==t))}return e.checklist?r.a.createElement("div",{className:e.className},r.a.createElement(k.a,{dense:!0},e.checklist.map(e=>r.a.createElement(Z,{item:e,key:e.id,onListItemChange:t,onListItemRemove:a})),r.a.createElement(Q,{onListItemAdd:function(t){e.onCheckListChange([...e.checklist,t])}}))):null},ee=a(1189),te=a(1258),ae=a(1194);var ne=function(e){const t=Object(o.d)(e=>{let{notesApp:t}=e;return t.labels.entities}),[a,n]=Object(c.useState)(null);function l(){n(null)}return r.a.createElement("div",null,r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0",onClick:function(e){e.stopPropagation(),n(e.currentTarget)}},r.a.createElement(w.a,{fontSize:"small"},"label")),r.a.createElement(ae.a,{hideBackdrop:!0,open:Boolean(a),anchorEl:a,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:"pointer-events-none",classes:{paper:"pointer-events-auto py-8 prevent-add-close"}},r.a.createElement(ee.a,{onClickAway:l},r.a.createElement(k.a,{className:"p-0"},Object.entries(t).map(t=>{let[a,n]=t;return r.a.createElement(S.a,{key:n.id,button:!0,dense:!0,onClick:()=>{return t=n.id,void e.onChange(O.a.xor(e.note.labels,[t]));var t}},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},e.note.labels.includes(n.id)?"check_box":"check_box_outline_blank"),r.a.createElement(te.a,{className:"truncate px-8",primary:n.name,disableTypography:!0}))})))))},le=a(1491),ce=a(1218),re=a(1543);var oe=function(e){const[t,a]=Object(c.useState)(!1),n=new Date(e.reminder);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0",onClick:()=>a(!0)},r.a.createElement(w.a,{fontSize:"small"},"notifications_active")),r.a.createElement(ce.a,{utils:le.a},r.a.createElement(re.a,{className:"hidden",open:t,onOpen:()=>a(!0),onClose:()=>a(!1),clearable:!0,showTodayButton:!0,disablePast:!0,value:n,onChange:e.onChange,DialogProps:{className:"prevent-add-close"}})))};var ie=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"button-file"},r.a.createElement("input",{accept:"image/*",className:"hidden",id:"button-file",type:"file",onChange:e.onChange}),r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0",component:"span"},r.a.createElement(w.a,{fontSize:"small"},"image"))))};function se(e){const[t,a]=Object(c.useState)(!1),n=Object(J.i)(),{form:l,handleChange:o,setForm:i}=Object(C.c)(O.a.merge({},R(),e.note,n.labelId?{labels:[n.labelId]}:null,"archive"===n.id?{archive:!0}:null)),{onChange:s}=e;function m(t){e.onCreate&&e.onCreate(l)}function u(){return""===l.title&&""===l.image&&""===l.description&&0===l.checklist.length}return Object(C.e)(()=>{l&&s&&s(l)},[l,s]),l?r.a.createElement("div",{className:"flex flex-col w-full"},r.a.createElement(_.a,{className:"flex flex-auto w-full max-h-640"},r.a.createElement("div",{className:"w-full"},l.image&&""!==l.image&&r.a.createElement("div",{className:"relative"},r.a.createElement("img",{src:l.image,className:"w-full block",alt:"note"}),r.a.createElement(F.a,{className:"absolute right-0 bottom-0 m-8",variant:"extended",size:"small",color:"secondary","aria-label":"Delete Image",onClick:function(){i(O.a.setIn(l,"image",""))}},r.a.createElement(w.a,{fontSize:"small"},"delete"))),r.a.createElement("div",{className:"p-16 pb-12"},r.a.createElement(N.a,{className:"font-bold",placeholder:"Title",type:"text",name:"title",value:l.title,onChange:o,disableUnderline:!0,fullWidth:!0})),r.a.createElement("div",{className:"p-16 pb-12"},r.a.createElement(N.a,{placeholder:"Take a note...",multiline:!0,rows:"4",name:"description",value:l.description,onChange:o,disableUnderline:!0,fullWidth:!0,autoFocus:!0})),(l.checklist.length>0||t)&&r.a.createElement("div",{className:"px-16"},r.a.createElement($,{checklist:l.checklist,onCheckListChange:function(e){i(O.a.setIn(l,"checklist",e))}})),(l.labels||l.reminder||l.time)&&r.a.createElement("div",{className:"flex flex-wrap w-full p-16 pb-12 -mx-4"},l.reminder&&r.a.createElement(G,{className:"mt-4 mx-4",date:l.reminder}),l.labels&&l.labels.map(e=>r.a.createElement(V,{id:e,key:e,className:"mt-4 mx-4",onDelete:()=>function(e){i(O.a.setIn(l,"labels",l.labels.filter(t=>t!==e)))}(e)})),l.time&&r.a.createElement(D.a,{color:"textSecondary",className:"text-12 mt-8 mx-4"},"Edited: ",Y()(l.time).format("MMM DD YY, h:mm A"))))),r.a.createElement("div",{className:"flex flex-auto justify-between items-center h-48"},r.a.createElement("div",{className:"flex items-center px-4"},r.a.createElement(H.a,{title:"Remind me",placement:"bottom"},r.a.createElement("div",null,r.a.createElement(oe,{reminder:l.reminder,onChange:function(e){i(O.a.setIn(l,"reminder",e))}}))),r.a.createElement(H.a,{title:"Add image",placement:"bottom"},r.a.createElement("div",null,r.a.createElement(ie,{onChange:function(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.readAsBinaryString(t),a.onload=()=>{i(O.a.setIn(l,"image","data:".concat(t.type,";base64,").concat(btoa(a.result))))},a.onerror=()=>{console.log("error on load image")}}}))),r.a.createElement(H.a,{title:"Add checklist",placement:"bottom"},r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0",onClick:function(){a(!t)}},r.a.createElement(w.a,{fontSize:"small"},"playlist_add_check"))),r.a.createElement(H.a,{title:"Change labels",placement:"bottom"},r.a.createElement("div",null,r.a.createElement(ne,{note:l,onChange:function(e){i(O.a.setIn(l,"labels",e))}}))),r.a.createElement(H.a,{title:l.archive?"Unarchive":"Archive",placement:"bottom"},r.a.createElement("div",null,r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0",onClick:function(){i(O.a.setIn(l,"archive",!l.archive)),"new"===e.variant&&setTimeout(()=>m())},disabled:u()},r.a.createElement(w.a,{fontSize:"small"},l.archive?"unarchive":"archive"))))),r.a.createElement("div",{className:"flex items-center px-4"},"new"===e.variant?r.a.createElement(M.a,{className:"m-4",onClick:m,variant:"outlined",size:"small",disabled:u()},"Create"):r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{title:"Delete Note",placement:"bottom"},r.a.createElement(j.a,{className:"w-32 h-32 mx-4 p-0",onClick:e.onRemove},r.a.createElement(w.a,{fontSize:"small"},"delete"))),r.a.createElement(M.a,{className:"m-4",onClick:e.onClose,variant:"outlined",size:"small"},"Close"))))):null}se.defaultProps={variant:"edit",note:null};var me=Object(J.j)(se);const ue=Object(s.b)("notesApp/notes/getNotes",async()=>{const e=await u.a.get("/api/notes-app/notes");return await e.data}),de=Object(s.b)("notesApp/notes/createNote",async e=>{const t=await u.a.post("/api/notes-app/create-note",{note:e});return await t.data}),pe=Object(s.b)("notesApp/notes/updateNote",async e=>{const t=await u.a.post("/api/notes-app/update-note",{note:e});return await t.data}),fe=Object(s.b)("notesApp/notes/removeNote",async(e,t)=>{let{dispatch:a,getState:n}=t;const l=await u.a.post("/api/notes-app/remove-note",{noteId:e}),c=await l.data;return a(we()),c}),be=Object(s.c)({}),{selectAll:he,selectEntities:Ee,selectById:ve}=be.getSelectors(e=>e.notesApp.notes),ge=Object(s.d)({name:"notesApp/notes",initialState:be.getInitialState({searchText:"",noteDialogId:null,variateDescSize:!0}),reducers:{setNotesSearchText:{reducer:(e,t)=>{e.searchText=t.payload},prepare:e=>({payload:e.target.value||""})},resetNotesSearchText:(e,t)=>{e.searchText=""},toggleVariateDescSize:(e,t)=>{e.variateDescSize=!e.variateDescSize},openNoteDialog:(e,t)=>{e.noteDialogId=t.payload},closeNoteDialog:(e,t)=>{e.noteDialogId=t.null}},extraReducers:{[ue.fulfilled]:be.setAll,[de.fulfilled]:be.addOne,[pe.fulfilled]:be.upsertOne,[fe.fulfilled]:be.removeOne}}),{setNotesSearchText:ye,resetNotesSearchText:xe,toggleVariateDescSize:Ce,openNoteDialog:Oe,closeNoteDialog:we}=ge.actions;var je=ge.reducer;const Ne=r.a.forwardRef((function(e,t){return r.a.createElement(P.a,Object.assign({direction:"up",ref:t},e))}));var ke=function(e){const t=Object(o.c)(),a=Object(o.d)(e=>{let{notesApp:t}=e;return t.notes}),n=Object(C.a)(e=>{t(pe(e))},600);return a.entities?r.a.createElement(i.a,{classes:{paper:"w-full m-24 rounded-8"},TransitionComponent:Ne,onClose:e=>t(we()),open:Boolean(a.noteDialogId)},r.a.createElement(me,{note:a.entities[a.noteDialogId],onChange:n,onClose:e=>t(we()),onRemove:function(){t(fe(a.noteDialogId))}})):null},Se=a(200),De=a(1243);const Ie=Object(De.a)({button:{cursor:"text"}});var ze=function(e){const t=Object(o.c)(),a=Ie(e),[n,l]=Object(c.useState)(!1);function i(){n&&(l(!1),document.removeEventListener("keydown",s,!1))}function s(e){27===e.keyCode&&i()}return r.a.createElement(Se.a,{className:Object(A.default)(a.button,"flex items-center w-full max-w-512 mt-8 mb-16 min-h-48 rounded-8 shadow flex-shrink-0")},n?r.a.createElement(ee.a,{onClickAway:function(e){const t=document.querySelector(".prevent-add-close");!!t&&t.contains(e.target)||i()}},r.a.createElement("div",{className:"w-full"},r.a.createElement(me,{onCreate:function(e){t(de(e)),i()},variant:"new"}))):r.a.createElement(D.a,{className:"w-full px-16 py-12 font-500 text-16 w-full",color:"textSecondary",onClick:function(e){e.stopPropagation(),l(!0),document.addEventListener("keydown",s,!1)}},"Take a note.."))},Ae=a(1550),Te=a.n(Ae),Le=a(108),Pe=a(1263);const _e={1:{fontSize:14,lineHeight:19},2:{fontSize:18,lineHeight:28},3:{fontSize:24,lineHeight:36},4:{fontSize:36,lineHeight:48},5:{fontSize:48,lineHeight:60}};var Me=function(e,t,a){if(!t)return;t.style.fontSize=null,t.style.lineHeight=null;const n=t.clientWidth;if(0===n)return;if(!a)return;const l=document.createElement("div");let c;l.style.display="inline-block",l.style.fontSize="10px",l.style.fontWeight="200",l.style.lineHeight="10px",l.style.position="absolute",l.style.whiteSpace="pre-wrap",l.style.wordWrap="break-word",l.style.pointerEvents="none",l.style.visibility="hidden",document.body.appendChild(l);const r=e.split(" ").map(e=>(l.textContent=e.toString(),l.clientWidth)),o=Math.max(...r),i=Math.floor(10*n/o);i<18?c=1:i>=18&&i<24?c=2:i>=24&&i<36?c=3:i>=36&&i<48?c=4:i>=48&&(c=5);let{lineHeight:s,fontSize:m}=_e[c];l.textContent=e,l.style.width="".concat(n,"px"),l.style.fontSize="".concat(m,"px"),l.style.lineHeight="".concat(s,"px");const u=l.clientHeight/s;u>4&&u<6?c=4:u>=6&&u<9?c=3:u>=9&&u<11?c=2:u>=11&&(c=1),document.body.removeChild(l),s=_e[c].lineHeight,m=_e[c].fontSize,t.style.fontSize="".concat(m,"px"),t.style.lineHeight="".concat(s,"px")};var Fe=function(e){const t=Object(o.c)();return r.a.createElement(Le.a,{animation:"transition.fadeIn",duration:400,delay:100},r.a.createElement(Pe.a,{className:Object(A.default)("cursor-pointer",e.className),onClick:()=>t(Oe(e.note.id))},e.note.image&&""!==e.note.image&&r.a.createElement("img",{src:e.note.image,className:"w-full block",alt:"note"}),e.note.title&&""!==e.note.title&&r.a.createElement(D.a,{className:"p-16 pb-8 text-14 font-bold"},e.note.title),e.note.description&&""!==e.note.description&&r.a.createElement(D.a,{className:"py-8 px-16",component:"div"},r.a.createElement("div",{className:Object(A.default)("w-full break-words",e.variateDescSize?"font-200":"text-14"),ref:t=>{setTimeout(()=>Me(e.note.description,t,e.variateDescSize))}},e.note.description)),e.note.checklist&&e.note.checklist.length>0&&r.a.createElement("ul",{className:"py-8 px-16 flex flex-wrap list-reset"},e.note.checklist.map(e=>r.a.createElement("li",{key:e.id,className:"flex items-center w-full"},r.a.createElement(w.a,{color:"action",className:"text-16"},e.checked?"check_box_outline":"check_box_outline_blank"),r.a.createElement(D.a,{className:Object(A.default)("truncate mx-8",e.checked&&"line-through"),color:e.checked?"textSecondary":"inherit"},e.text)))),(e.note.labels.length>0||e.note.reminder)&&r.a.createElement("div",{className:"py-8 px-16 flex flex-wrap w-full -mx-2"},e.note.reminder&&r.a.createElement(G,{className:"mt-4 mx-2 max-w-full",date:e.note.reminder}),e.note.labels.map(e=>r.a.createElement(V,{id:e,key:e,className:"mt-4 mx-2 max-w-full",linkable:!0})))))};var He=Object(J.j)((function(e){const t=Object(o.d)(he),a=Object(o.d)(e=>{let{notesApp:t}=e;return t.notes.variateDescSize}),n=Object(o.d)(e=>{let{notesApp:t}=e;return t.notes.searchText}),[l,i]=Object(c.useState)(null);return Object(c.useEffect)(()=>{t.length>0&&i(function(){const{params:a}=e.match,{id:l,labelId:c}=a;let r=t;return c&&(r=r.filter(e=>e.labels.includes(c)&&!e.archive)),l||(r=r.filter(e=>!e.archive)),"archive"===l&&(r=r.filter(e=>e.archive)),"reminders"===l&&(r=r.filter(e=>Boolean(e.reminder)&&!e.archive)),0===n.length||(r=I.a.filterArrayByString(r,n)),r}())},[t,n,e.match]),l&&0!==l.length?r.a.createElement("div",{className:"flex flex-wrap w-full"},r.a.createElement(Te.a,{breakpointCols:{default:6,1920:5,1600:4,1366:3,1280:4,960:3,600:2,480:1},className:"my-masonry-grid flex w-full",columnClassName:"my-masonry-grid_column flex flex-col p-0 md:p-8"},l.map(e=>r.a.createElement(Fe,{key:e.id,note:e,className:"w-full rounded-8 shadow mb-16",variateDescSize:a})))):r.a.createElement("div",{className:"flex items-center justify-center h-full"},r.a.createElement(D.a,{color:"textSecondary",variant:"h5"},"There are no notes!"))})),Re=a(1275);const We=Object(De.a)(e=>({root:{},inputWrapper:{backgroundColor:e.palette.primary.dark}}));function Ue(e){const t=Object(o.c)(),a=Object(o.d)(e=>{let{notesApp:t}=e;return t.notes.notesSearchText}),n=We(e),[l,i]=Object(c.useState)(!1);function s(e){e.stopPropagation(),i(!0),document.addEventListener("keydown",u,!1)}function m(){i(!1),t(xe()),document.removeEventListener("keydown",u,!1)}function u(e){27===e.keyCode&&m()}return r.a.createElement("div",{className:Object(A.default)(n.root,"flex",e.className)},r.a.createElement(H.a,{title:"Click to search",placement:"bottom"},r.a.createElement("div",{onClick:s,onKeyDown:s,role:"button",tabIndex:0},e.trigger)),l&&r.a.createElement(ee.a,{onClickAway:function(){m()}},r.a.createElement("div",{className:Object(A.default)(n.inputWrapper,"absolute left-0 right-0 top-0 bottom-0 h-full z-9999 px-8 sm:px-24")},r.a.createElement("div",{className:"flex items-center w-full h-full"},r.a.createElement(N.a,{placeholder:"Search for anything",className:"flex flex-1 py-0 px-16 h-64",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:e=>t(ye(e)),autoFocus:!0}),r.a.createElement(j.a,{onClick:m,className:"mx-8"},r.a.createElement(w.a,null,"close"))))))}Ue.defaultProps={trigger:r.a.createElement(j.a,{className:"w-64 h-64"},r.a.createElement(w.a,null,"search"))};var Be=Ue;var Ve=function(e){const t=Object(o.c)(),a=Object(o.d)(e=>{let{notesApp:t}=e;return t.notes.variateDescSize});return r.a.createElement("div",{className:"flex flex-1 items-center justify-between p-8 sm:p-24 relative"},r.a.createElement("div",{className:"flex flex-shrink items-center sm:w-224"},r.a.createElement(Re.a,{lgUp:!0},r.a.createElement(j.a,{onClick:t=>e.pageLayout.current.toggleLeftSidebar(),"aria-label":"open left sidebar"},r.a.createElement(w.a,null,"menu"))),r.a.createElement("div",{className:"flex items-center"},r.a.createElement(Le.a,{animation:"transition.expandIn",delay:300},r.a.createElement(w.a,{className:"text-32"},"account_box")),r.a.createElement(Le.a,{animation:"transition.slideLeftIn",delay:300},r.a.createElement(D.a,{variant:"h6",className:"mx-12 hidden sm:flex"},"Notes")))),r.a.createElement("div",{className:"flex flex-1 items-center justify-end"},r.a.createElement(H.a,{title:"Toggle Variate Description Size"},r.a.createElement(j.a,{onClick:e=>t(Ce())},r.a.createElement(w.a,{color:a?"action":"disabled"},"format_size"))),r.a.createElement(Be,null)))},qe=a(96),Ye=a(1262),Ge=a(1261);const Je=Object(De.a)(e=>({paper:{[e.breakpoints.down("md")]:{boxShadow:"none"}},listItem:{color:"inherit!important",textDecoration:"none!important",height:40,width:"calc(100% - 16px)",borderRadius:"0 20px 20px 0",paddingLeft:24,paddingRight:12,"&.active":{backgroundColor:e.palette.secondary.main,color:"".concat(e.palette.secondary.contrastText,"!important"),pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{marginRight:16}}}));var Ke=function(e){const t=Object(o.c)(),a=Object(o.d)(b),n=Je(e);return r.a.createElement("div",{className:"p-0 lg:p-24 lg:ltr:pr-4 lg:rtl:pl-4"},r.a.createElement(Le.a,{animation:"transition.slideLeftIn",delay:200},r.a.createElement(Se.a,{className:Object(A.default)(n.paper,"rounded-0 shadow-none lg:rounded-8 lg:shadow")},r.a.createElement(k.a,null,r.a.createElement(S.a,{button:!0,component:qe.a,to:"/apps/notes",exact:!0,activeClassName:"active",className:n.listItem},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"label"),r.a.createElement(te.a,{className:"truncate",primary:"Notes",disableTypography:!0})),r.a.createElement(S.a,{button:!0,component:qe.a,to:"/apps/notes/reminders",exact:!0,activeClassName:"active",className:n.listItem},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"notifications"),r.a.createElement(te.a,{className:"truncate",primary:"Reminders",disableTypography:!0}))),r.a.createElement(Ye.a,null),r.a.createElement(k.a,null,r.a.createElement(Ge.a,null,"Labels"),a.map(e=>r.a.createElement(S.a,{key:e.id,button:!0,component:qe.a,to:"/apps/notes/labels/".concat(e.handle,"/").concat(e.id),exact:!0,activeClassName:"active",className:n.listItem},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"label"),r.a.createElement(te.a,{className:"truncate",primary:e.name,disableTypography:!0}))),r.a.createElement(S.a,{button:!0,className:n.listItem,onClick:e=>t(g())},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"edit"),r.a.createElement(te.a,{className:"truncate",primary:"Edit Labels",disableTypography:!0}))),r.a.createElement(Ye.a,null),r.a.createElement(k.a,null,r.a.createElement(S.a,{button:!0,component:qe.a,to:"/apps/notes/archive",activeClassName:"active",className:n.listItem},r.a.createElement(w.a,{className:"list-item-icon text-16",color:"action"},"archive"),r.a.createElement(te.a,{className:"truncate",primary:"Archive",disableTypography:!0}))))))},Qe=a(105);var Xe=Object(Qe.c)({notes:je,labels:x});t.default=Object(l.a)("notesApp",Xe)((function(e){const t=Object(o.c)(),a=Object(c.useRef)(null);return Object(c.useEffect)(()=>{t(ue()),t(d())},[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(n.a,{classes:{contentWrapper:"p-16 sm:p-24 pb-80",content:"flex min-h-full",leftSidebar:"w-256 border-0",header:"min-h-72 h-72"},header:r.a.createElement(Ve,{pageLayout:a}),content:r.a.createElement("div",{className:"flex flex-col w-full items-center"},r.a.createElement(ze,null),r.a.createElement(He,null),r.a.createElement(ke,null),r.a.createElement(L,null)),leftSidebarContent:r.a.createElement(Ke,null),sidebarInner:!0,ref:a,innerScroll:!0}))}))}}]);